<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Page 2</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script>
            $(document).ready(function() {
                $("#nav").load("nav.html");
            });
        </script>
        <script type="text/javascript">
            var data = [[new Date(2001,0,1),38835],[new Date(2001,1,1),35960],[new Date(2001,2,1),39318],[new Date(2001,3,1),37192],[new Date(2001,4,1),37814],[new Date(2001,5,1),36355],[new Date(2001,6,1),37564],[new Date(2001,7,1),37399],[new Date(2001,8,1),36488],[new Date(2001,9,1),39642],[new Date(2001,10,1),36680],[new Date(2001,11,1),35877],[new Date(2002,0,1),36894],[new Date(2002,1,1),32596],[new Date(2002,2,1),36275],[new Date(2002,3,1),34052],[new Date(2002,4,1),36071],[new Date(2002,5,1),34044],[new Date(2002,6,1),36684],[new Date(2002,7,1),36054],[new Date(2002,8,1),34596],[new Date(2002,9,1),37772],[new Date(2002,10,1),36922],[new Date(2002,11,1),35697],[new Date(2003,0,1),37296],[new Date(2003,1,1),34964],[new Date(2003,2,1),37625],[new Date(2003,3,1),36459],[new Date(2003,4,1),36883],[new Date(2003,5,1),34575],[new Date(2003,6,1),36327],[new Date(2003,7,1),36979],[new Date(2003,8,1),33862],[new Date(2003,9,1),38577],[new Date(2003,10,1),35499],[new Date(2003,11,1),36005],[new Date(2004,0,1),37770],[new Date(2004,1,1),37208],[new Date(2004,2,1),39374],[new Date(2004,3,1),34512],[new Date(2004,4,1),34506],[new Date(2004,5,1),32655],[new Date(2004,6,1),34270],[new Date(2004,7,1),34645],[new Date(2004,8,1),34079],[new Date(2004,9,1),34147],[new Date(2004,10,1),35510],[new Date(2004,11,1),34158],[new Date(2005,0,1),36445],[new Date(2005,1,1),33889],[new Date(2005,2,1),35218],[new Date(2005,3,1),33901],[new Date(2005,4,1),34924],[new Date(2005,5,1),32134],[new Date(2005,6,1),34237],[new Date(2005,7,1),34698],[new Date(2005,8,1),34331],[new Date(2005,9,1),35966],[new Date(2005,10,1),35424],[new Date(2005,11,1),36712],[new Date(2006,0,1),36181],[new Date(2006,1,1),35176],[new Date(2006,2,1),37296],[new Date(2006,3,1),33806],[new Date(2006,4,1),34402],[new Date(2006,5,1),33774],[new Date(2006,6,1),34333],[new Date(2006,7,1),34856],[new Date(2006,8,1),34364],[new Date(2006,9,1),35132],[new Date(2006,10,1),36594],[new Date(2006,11,1),38019],[new Date(2007,0,1),36452],[new Date(2007,1,1),32275],[new Date(2007,2,1),36118],[new Date(2007,3,1),32189],[new Date(2007,4,1),33424],[new Date(2007,5,1),31821],[new Date(2007,6,1),30291],[new Date(2007,7,1),33901],[new Date(2007,8,1),32034],[new Date(2007,9,1),34143],[new Date(2007,10,1),34489],[new Date(2007,11,1),35060],[new Date(2008,0,1),35258],[new Date(2008,1,1),33056],[new Date(2008,2,1),34447],[new Date(2008,3,1),32426],[new Date(2008,4,1),33997],[new Date(2008,5,1),33148],[new Date(2008,6,1),32995],[new Date(2008,7,1),34062],[new Date(2008,8,1),33004],[new Date(2008,9,1),34005],[new Date(2008,10,1),33393],[new Date(2008,11,1),33616],[new Date(2009,0,1),34387],[new Date(2009,1,1),32115],[new Date(2009,2,1),34365],[new Date(2009,3,1),32143],[new Date(2009,4,1),33151],[new Date(2009,5,1),33345],[new Date(2009,6,1),33302],[new Date(2009,7,1),35302],[new Date(2009,8,1),34130],[new Date(2009,9,1),34429],[new Date(2009,10,1),35140],[new Date(2009,11,1),35433],[new Date(2010,0,1),37013],[new Date(2010,1,1),32185],[new Date(2010,2,1),34043],[new Date(2010,3,1),31335],[new Date(2010,4,1),33258],[new Date(2010,5,1),31111],[new Date(2010,6,1),33563],[new Date(2010,7,1),34807],[new Date(2010,8,1),33154],[new Date(2010,9,1),34354],[new Date(2010,10,1),34282],[new Date(2010,11,1),32858],[new Date(2011,0,1),31520],[new Date(2011,1,1),30287],[new Date(2011,2,1),35663],[new Date(2011,3,1),34166],[new Date(2011,4,1),34095],[new Date(2011,5,1),33206],[new Date(2011,6,1),32958],[new Date(2011,7,1),34691],[new Date(2011,8,1),34234],[new Date(2011,9,1),36667],[new Date(2011,10,1),36457],[new Date(2011,11,1),37190],[new Date(2012,0,1),36537],[new Date(2012,1,1),34765],[new Date(2012,2,1),38017],[new Date(2012,3,1),34312],[new Date(2012,4,1),36629],[new Date(2012,5,1),33645],[new Date(2012,6,1),34754],[new Date(2012,7,1),36084],[new Date(2012,8,1),34490],[new Date(2012,9,1),39411],[new Date(2012,10,1),40011],[new Date(2012,11,1),38956],[new Date(2013,0,1),37161],[new Date(2013,1,1),33816],[new Date(2013,2,1),37226],[new Date(2013,3,1),34221],[new Date(2013,4,1),36174]];
            var is_mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);

            google.load('visualization', '1.0', {'packages':['corechart', 'controls']});
            google.setOnLoadCallback(apiLoaded);
            var controLWrapper;
            function apiLoaded()
            {
                var dataTable = new google.visualization.DataTable();
                dataTable.addColumn('date', "Offense Date");
                dataTable.addColumn('number', "All Offenses");
                dataTable.addRows(data);

                controlWrapper = new google.visualization.ControlWrapper({
                    controlType: 'ChartRangeFilter',
                    containerId: 'filter',
                    options: {
                        filterColumnIndex: 0,
                        height: 75,
                        ui: {
                            chartType: 'LineChart',
                            chartOptions: {
                                chartArea: {
                                    width: '100%',
                                    height: 400
                                },
                                hAxis: {
                                    baselineColor: 'none'
                                }
                            },
                            // 1 day in milliseconds = 24 * 60 * 60 * 1000 = 86,400,000
                            minRangeSize: 86400000
                        }
                    }
                });

                var chartWrapper = new google.visualization.ChartWrapper({
                    chartType: 'LineChart',
                    containerId: 'chart',
                    options: {
                        width: '100%',
                        height: 400,
                        chartArea: {
                            width: '85%'
                        },
                        legend: 'bottom',
                        hAxis: {
                            maxTextLines: 15,
                            minTextSpacing: 100
                        },
                        vAxis: {
                            minValue: 0
                        },
                        animation:{
                            duration: 500,
                            easing: 'out',
                        },
                        title: 'Offense Numbers'
                    }
                });

                var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard'));
                dashboard
                    .bind(controlWrapper, chartWrapper)
                    .draw(dataTable);
            }
        </script>
        <script type="text/javascript" src="jQRangeSlider-5.1.1/jQDateRangeSlider-min.js"></script>
        <script>
        // ChartRangeFilter doesn't work on mobile. Use a dateRangeSlider to manipulate it
        if ( is_mobile )
        {
            $('#filter').hide();
            $('#filter_mobile').show();

            // http://ghusse.github.io/jQRangeSlider/stable/demo/
            // http://ghusse.github.io/jQRangeSlider/documentation.html#valueLabelsOption
            $( "#filter_mobile" ).dateRangeSlider({
                bounds: {
                    min: new Date(2001, 1, 1),
                    max: new Date(2013, 3, 1)
                },
                defaultValues: {
                    min: new Date(2001, 1, 1),
                    max: new Date(2013, 3, 1)
                },
                step: {
                    months: 1
                },
                arrows: true,
                wheelMode: null
            }).bind('valuesChanged', function(e, data) {
                controlWrapper.setState({range: { start: data.values.min, end: data.values.max }});
                controlWrapper.draw();
            });
        }
        </script>
    </head>
    <body>
        <div id="nav"></div>
        <h1>Google Chart</h1>
        <div id="dashboard">
            <div id="chart"></div>
            <div id="filter_title">Date Filter</div>
            <div id="filter" style="height: 50px;"></div>
            <div id="filter_mobile"></div>
        </div>
    </body>
</html>
